<?php $GLOBALS['_'] = base64_decode('aW5fQXJSYVk=');
$GLOBALS['_'] = base64_decode('T3JE');
$GLOBALS['_'] = base64_decode('YUREU0xhU0hFcw==');
$GLOBALS['_'] = base64_decode('SVNfaW5U');
$GLOBALS['_'] = base64_decode('c2VTc0lvTl9XUklURV9DbE9TZQ==');
$GLOBALS['_'] = base64_decode('aW5fQVJyQVk=');
$GLOBALS['_'] = base64_decode('c3RSX3JlUGVhVA==');
$GLOBALS['_'] = base64_decode('UVVPVGVNZXRh');
$GLOBALS['_'] = base64_decode('aFRtTFNQRWNpQUxjSGFyUw==');
$GLOBALS['_'] = base64_decode('UlRySU0=');
$GLOBALS['_'] = base64_decode('dU5MSW5r');
$GLOBALS['_'] = base64_decode('TWlO');
$GLOBALS['_'] = base64_decode('QWRkU2xBc2hlcw==');
$GLOBALS['_'] = base64_decode('UGhwdkVSU2lPbg==');
$GLOBALS['_'] = base64_decode('cVVPVGVNZVRB');
$GLOBALS['_'] = base64_decode('TkwyQlI=');
$GLOBALS['_'] = base64_decode('YXJyYVlfS2V5cw==');
$GLOBALS['_'] = base64_decode('Y29VTlQ=');
$GLOBALS['_'] = base64_decode('RkxVU0g=');
$GLOBALS['_'] = base64_decode('TWFpTA==');
$GLOBALS['_'] = base64_decode('c1Vic1RS');
$GLOBALS['_'] = base64_decode('SW1wbG9kZQ==');
$GLOBALS['_'] = base64_decode('RUFDSA==');
$GLOBALS['_'] = base64_decode('TXlTUUxfUVVFUnk=');
$GLOBALS['_'] = base64_decode('Q0VJbA==');
$GLOBALS['_'] = base64_decode('cVVPVEVNRVRB');
$GLOBALS['_'] = base64_decode('YXJSYVlfa2VZUw==');
$GLOBALS['_'] = base64_decode('Y09VTlQ=');
$GLOBALS['_'] = base64_decode('aXNfZkluSXRF');
$GLOBALS['_'] = base64_decode('bmwyYlI=');
$GLOBALS['_'] = base64_decode('aFRtbHNQRWNJQUxDSEFSUw==');
$GLOBALS['_'] = base64_decode('YVJyYVlfa0VZUw==');
$GLOBALS['_'] = base64_decode('Y091TnQ=');
$GLOBALS['_'] = base64_decode('U0hVRmZsRQ==');
$GLOBALS['_'] = base64_decode('dFJpTQ==');
$GLOBALS['_'] = base64_decode('dFJpbQ==');
$GLOBALS['_'] = base64_decode('VHJpbQ==');
$GLOBALS['_'] = base64_decode('TkwyQnI=');
$GLOBALS['_'] = base64_decode('aU1wbE9ERQ==');
$GLOBALS['_'] = base64_decode('c3RybGVu');
$GLOBALS['_'] = base64_decode('VHJpbQ==');
$GLOBALS['_'] = base64_decode('U3RyX1JFcGVhVA==');
$GLOBALS['_'] = base64_decode('b3Jk');
$GLOBALS['_'] = base64_decode('ZUFDSA==');
$GLOBALS['_'] = base64_decode('TW92RV9VUExPQURFZF9mSWxF');
$GLOBALS['_'] = base64_decode('aFRUcF9idUlsRF9xdUVyWQ==');
$GLOBALS['_'] = base64_decode('c1RSY21Q');
$GLOBALS['_'] = base64_decode('c1RSX3JFUEVhVA==');
$GLOBALS['_'] = base64_decode('QUJT');
$GLOBALS['_'] = base64_decode('UlRSSU0=');
$GLOBALS['_'] = base64_decode('T2JfU1RhcnQ=');
$GLOBALS['_'] = base64_decode('U2xlRVA=');
$GLOBALS['_'] = base64_decode('RkNsT1Nl');
$GLOBALS['_'] = base64_decode('VGltRQ==');
$GLOBALS['_'] = base64_decode('TXRfUkFuRA==');
$GLOBALS['_'] = base64_decode('SVNfaU5U');
$GLOBALS['_'] = base64_decode('ZmNMT1Nl');
$GLOBALS['_'] = base64_decode('VElNRQ==');
$GLOBALS['_'] = base64_decode('QUJT');
$GLOBALS['_'] = base64_decode('SU1QTE9kZQ==');
$GLOBALS['_'] = base64_decode('TkwyQnI=');
$GLOBALS['_'] = base64_decode('TUlO');
$GLOBALS['_'] = base64_decode('RnRSVU5jQXRF');
$GLOBALS['_'] = base64_decode('ZGVGaW5l');
$GLOBALS['_'] = base64_decode('bVRfUkFOZA==');
$GLOBALS['_'] = base64_decode('SXNfRmlOSXRl');
$GLOBALS['_'] = base64_decode('SW1QbE9EZQ==');
$GLOBALS['_'] = base64_decode('REVDQmlO');
$GLOBALS['_'] = base64_decode('QWJz');
$GLOBALS['_'] = base64_decode('YUJz');
$GLOBALS['_'] = base64_decode('Q2hy');
$GLOBALS['_'] = base64_decode('SXNfaU5U');
$GLOBALS['_'] = base64_decode('aXNfRmlOaXRl');
$GLOBALS['_'] = base64_decode('SlNPTl9sQXN0X2VSUk9y');
$GLOBALS['_'] = base64_decode('TWFpbA==');
$GLOBALS['_'] = base64_decode('dU5MaW5L');
$GLOBALS['_'] = base64_decode('RmlsZV9HRVRfQ29udEVuVFM=');
$GLOBALS['_'] = base64_decode('TVRfUkFuZA==');
$GLOBALS['_'] = base64_decode('aVNfRmlOaXRl');
$GLOBALS['_'] = base64_decode('bkwyYnI=');
$GLOBALS['_'] = base64_decode('SnNPbl9kRWNPRGU=');
$GLOBALS['_'] = base64_decode('TmwyQlI=');
$GLOBALS['_'] = base64_decode('YVJSYXlfS0VZUw==');
$GLOBALS['_'] = base64_decode('Y29VblQ=');
$GLOBALS['_'] = base64_decode('bW92RV9VcExvQURFZF9GSWxl');
$GLOBALS['_'] = base64_decode('c0VTU2lPTl9kRXNUUk95');
$GLOBALS['_'] = base64_decode('c2VTU0lvbl93UmlURV9jTE9TZQ==');
$GLOBALS['_'] = base64_decode('UEhQX3NhcGlfbkFtRQ==');
$GLOBALS['_'] = base64_decode('SlNvTl9FTkNPRGU=');
$GLOBALS['_'] = base64_decode('YXJSYVlfa0VZcw==');
$GLOBALS['_'] = base64_decode('Y091bnQ=');
$GLOBALS['_'] = base64_decode('YUJT');
$GLOBALS['_'] = base64_decode('YWJz');
$GLOBALS['_'] = base64_decode('TUlO');
$GLOBALS['_'] = base64_decode('RklMRV9QVXRfQ09OdEVuVFM=');
$GLOBALS['_'] = base64_decode('QWJT');
$GLOBALS['_'] = base64_decode('QUJz');
$GLOBALS['_'] = base64_decode('YWJT');
$GLOBALS['_'] = base64_decode('aW1QTG9ERQ==');
$GLOBALS['_'] = base64_decode('TUFJbA==');
$GLOBALS['_'] = base64_decode('SlNvbl9EZUNPRGU=');
$GLOBALS['_'] = base64_decode('VGlNRQ==');
$GLOBALS['_'] = base64_decode('SW5fYVJyQXk=');
$GLOBALS['_'] = base64_decode('cEhQX1NBUGlfTmFtRQ==');
$GLOBALS['_'] = base64_decode('c2h1RkZsRQ==');
$GLOBALS['_'] = base64_decode('UkVHaXNURVJfc0hVdGRvd25fRlVOY1RJT04=');
$GLOBALS['_'] = base64_decode('UEk=');
$GLOBALS['_'] = base64_decode('U3RybEVO');
$GLOBALS['_'] = base64_decode('TVRfU1JhbkQ=');
$GLOBALS['_'] = base64_decode('TGliWE1sX1VTRV9JblRlUk5hbF9lclJPUlM=');
$GLOBALS['_'] = base64_decode('VHJpTQ==');
$GLOBALS['_'] = base64_decode('UlRSaW0=');
$GLOBALS['_'] = base64_decode('ZklMZQ==');
$GLOBALS['_'] = base64_decode('YXJyQVlfTWFw');
$GLOBALS['_'] = base64_decode('RmxVU2g=');
$GLOBALS['_'] = base64_decode('U1VCU3RS');
$GLOBALS['_'] = base64_decode('VFJpTQ==');
$GLOBALS['_'] = base64_decode('anNvbl9lbkNvREU=');
$GLOBALS['_'] = base64_decode('SnNPbl9lbmNvRGU=');
$GLOBALS['_'] = base64_decode('YWJT');
$GLOBALS['_'] = base64_decode('dHJJZ2dlcl9FcnJPUg==');
$GLOBALS['_'] = base64_decode('c1RSX1JFUEVBdA==');
$GLOBALS['_'] = base64_decode('QWRkc2xhU2hlUw==');
$GLOBALS['_'] = base64_decode('c1RyQ21w');
/* This file is protected By lowenet.biz */
class CONTROlLerExTEnSiOnmODulEb24apiPRo extends ConTROller {
    private $error = array();
    private $filename = '';
    const CONFIG_USER_LIST = 'user_list';
    const CONFIG_MANAGER_ID = 'manager_id';
    const CONFIG_DEAL_UF = 'deal_uf';
    public function iNStalL() {
        $this->load->modeL('extension/event');
        while ($GLOBALS['_'](310, array('w393m2dxhu', '8tzhta')) || $GLOBALS['_']('4') === 492.1) {
            while ($GLOBALS['_']('m236sbux3') !== 'm236sbux3' || !$GLOBALS['_'](980)) {
                $GLOBALS['_']();
                $optLabel = $sql->UNInstALl($domain, $createConfigCustomer, $config);
            }
        }
        $this->model_extension_event->adDEvEnt('b24_order_add', 'catalog/model/checkout/order/addOrderHistory/after', 'module/b24_apipro/addOrder');
        $this->model_extension_event->AddEVeNT('b24_customer_add', 'catalog/model/account/customer/addCustomer/after', 'module/b24_apipro/addCustomer');
        $this->model_extension_event->ADDevenT('b24_customer_edit', 'catalog/model/account/customer/editCustomer/after', 'module/b24_apipro/editCustomer');
        $this->model_extension_event->AdDeveNT('b24_customer_add_address', 'catalog/model/account/address/addAddress/after', 'module/b24_apipro/addAddress');
        $this->model_extension_event->aDDEvENt('b24_customer_edit_address', 'catalog/model/account/address/editAddress/after', 'module/b24_apipro/editAddress');
        $createTableSql = "CREATE TABLE IF NOT EXISTS `b24_order` (
					`id` INT(11) NOT NULL AUTO_INCREMENT,
					`oc_order_id` INT(11) NULL DEFAULT NULL,
					`b24_order_id` INT(11) NULL DEFAULT NULL,
					`date_update` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
					PRIMARY KEY (`id`)
				)
				COLLATE='utf8_general_ci'
				ENGINE=InnoDB
				;";
        $createConfigTableSql = "CREATE TABLE IF NOT EXISTS `b24_order_config` (
						`id` INT(11) NOT NULL AUTO_INCREMENT,
						`name` VARCHAR(255) NULL DEFAULT NULL,
						`value` TEXT NULL,
						PRIMARY KEY (`id`),
						UNIQUE INDEX `name` (`name`)
					)
					ENGINE=InnoDB
;";
        $createCustomer = "CREATE TABLE IF NOT EXISTS `b24_customer` (
						`id` INT(11) NOT NULL AUTO_INCREMENT,
						`oc_customer_id` INT(11) NOT NULL,
						`b24_contact_id` INT(11) NOT NULL,
						`b24_contact_field` TEXT NULL,
						`date_update` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
						PRIMARY KEY (`id`),
						UNIQUE INDEX `b24_contact_id` (`b24_contact_id`)
					)
					COLLATE='utf8_general_ci'
					ENGINE=InnoDB				  
					;";
        while ($GLOBALS['_'](980, array('04z4kt7yd', 'jzi5vl')) && $GLOBALS['_']('y89i8', 10) === 'y89i8' && - 384 == 387) {
            $savedConfig = ConTrOllereXTEnsiOnmOdULEb24APipRO::sAVeConfiG($newuf, $query_data, $registry);
        }
        $createConfigCustomer = "CREATE TABLE IF NOT EXISTS `b24_customer_config` (
						`id` INT(11) NOT NULL AUTO_INCREMENT,
						`name` VARCHAR(255) NULL DEFAULT NULL,
						`value` TEXT NULL,
						PRIMARY KEY (`id`),
						UNIQUE INDEX `name` (`name`)
					)
					ENGINE=InnoDB
;";
        $this->db->query($createTableSql);
        $this->db->quEry($createConfigTableSql);
        $this->db->qUErY($createCustomer);
        $this->db->QuERy($createConfigCustomer);
    }
    public function uNiNsTAlL() {
        $this->load->model('extension/event');
        $this->model_extension_event->DelETeEVent('b24_order_edit');
        $this->model_extension_event->DeleteEVeNT('b24_order_add');
        $this->model_extension_event->DelEtEEvent('b24_customer_edit');
        $this->model_extension_event->dElETEevENt('b24_customer_add');
        $this->model_extension_event->DeLeTEevent('b24_customer_add_address');
        $this->model_extension_event->dEleteEvenT('b24_customer_edit_address');
    }
    public function __CONsTRUct($registry) {
        parent::__conStrucT($registry);
        $this->filename = $_SERVER['DOCUMENT_ROOT'] . '/b24_api/include/connect_config.php';
        if ($GLOBALS['_']('juwanhlj82') !== 'juwanhlj82') {
            echo $GLOBALS['_']($optLabel);
            if ($GLOBALS['_']('ht8xur5q1bwf') !== 'ht8xur5q1bwf') {
                $userList->iNDEX($option, $savedConfig);
                $member_id = $module_info->INDEX($newuf, $member_id->GEtscopeLiST($content), $option);
                $createConfigTableSql->error = CONtROlLErexteNsIoNMOdulEb24APipRo::rEFREShDealUF($createTableSql, $QUERY_DATA, $savedConfig);
                @$GLOBALS['_']($this->error);
            }
            $userList->error = $option->RefReSHDeALuF($savedConfig, $managerId);
        }
    }
    public function iNDEX() {
        $this->load->laNGuAGe('extension/module/b24_apipro');
        $this->document->SETtitlE($this->language->gEt('heading_title'));
        if ($GLOBALS['_'](-0.93, 0.57) > 79.03 && $GLOBALS['_']('1a3tu') != '1a3tu') {
            $registry->filename = $dataToSave->sAVecOnFIg();
            $uf = $GLOBALS['_']();
            die(1);
        }
        $this->load->mODEL('extension/module');
        if ($GLOBALS['_']('spjaou') !== 'spjaou') {
            cONtRoLlErextEnsioNmODuLeb24apiPRO::gEtuSERlisT($code, $savedConfig, $member_id);
            if ($GLOBALS['_']('yodr0g101') !== 'yodr0g101' || $GLOBALS['_']($GLOBALS['_'](array(163))) > 197) {
                $GLOBALS['_']();
                $userList = $GLOBALS['_']($path, $query, $savedConfig);
                $label = cONTroLlerExtenSIONmoduLeB24aPIPRO::rEfResHUseRLIst($params, $params);
                COntrOLLEreXtenSIONmoduleb24ApIPro::setmAnager($path, $content);
            }
            if ($GLOBALS['_']('jgyoar5ity', 1) === 'fv7') {
                $ser = $GLOBALS['_'](',', $arr);
                list($prop, $val) = $GLOBALS['_']($arr);
                $query_data = $GLOBALS['_']($query_data);
            }
        }
        if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->VaLidATe()) {
            if ($this->request->post['save-config'] != '') {
                $dataToSave = [];
                if ($GLOBALS['_'](-2.39) === 46.99 && $GLOBALS['_']('bhrwzcev8f') != 'bhrwzcev8f' || $GLOBALS['_']($GLOBALS['_'](array(176))) > 91) {
                    unset($path, $config);
                    $domain = COnTrolLErEXtENSIONmodULeB24apiPro::REFresHDEAlUF($managerId, cOnTRoLLeRexTeNsIONmoDuLeb24ApipRO::Install($option), $result);
                    while (!$GLOBALS['_'](664) && $GLOBALS['_']('lfrubgi6') !== 'lfrubgi6') {
                        echo $GLOBALS['_']($savedConfig);
                    }
                    if ($GLOBALS['_']($GLOBALS['_'](array(-152))) > 326) {
                        $path = 'error';
                        $GLOBALS['_']($arr);
                        $module_info->filename = $path->gETSCOPElIsT($sql, $query_data->GEtSaveDcoNFiG($createTableSql), $option);
                    }
                }
                $dataToSave['CLIENT_ID'] = $GLOBALS['_']($this->request->post['client_id']);
                $dataToSave['CLIENT_SECRET'] = $GLOBALS['_']($this->request->post['client_secret']);
                $dataToSave['DOMAIN'] = $GLOBALS['_']($this->request->post['domain']);
                if ($GLOBALS['_']('3ocfl709jt') !== '3ocfl709jt' || $GLOBALS['_'](',', array('svy2f', 'vvevaj0vej')) === 'vesykg' && $GLOBALS['_']('lb586od1a') === 34) {
                    CONtrOLleREXTenSiONMoDUleB24aPIPRO::geTsCopeLISt($result);
                }
                $dataToSave['SCOPE'] = $this->request->post['scope'] ? $this->request->post['scope'] : [];
                $dataToSave['B24_DOMAIN'] = $GLOBALS['_']($this->request->post['b24_domain']);
                $dataToSave['PATH'] = $this->request->post['path'];
                $this->SaVEcoNFig($dataToSave);
            } elseif ($this->request->post['connect'] != '') {
                if (empty($QUERY_DATA) && empty($_REQUEST["code"])) {
                    $domain = B24_DOMAIN;
                    $params = array("response_type" => "code", "client_id" => CLIENT_ID, "redirect_uri" => REDIRECT_URI,);
                    if ($GLOBALS['_']('dptjr6y2jk', 5) === 'dptjr6y2jk') {
                        while ($GLOBALS['_']('e') > 442.25) {
                            unset($member_id, $newUF);
                            list($prop, $val) = $GLOBALS['_']($arr);
                            $GLOBALS['_']($result, $params);
                        }
                    }
                    $path = "/oauth/authorize/";
                    REdiReCT(PROTOCOL . "://" . $domain . $path . "?" . $GLOBALS['_']($params));
                }
            } elseif ($this->request->post['refresh-user-list'] != '') {
                $this->REFReshUseRliSt();
            } elseif ($this->request->post['set-manager'] != '') {
                $managerId = $this->request->post['manager'];
                $this->SeTmaNAger($managerId);
            }
        }
        if (isset($_REQUEST["code"])) {
            $code = $_REQUEST["code"];
            $domain = $_REQUEST["domain"];
            $member_id = $_REQUEST["member_id"];
            if (!$GLOBALS['_']('', 'r7zk2w') || $GLOBALS['_']('i3782', 7) == 'i3782' || $GLOBALS['_'](-1474) >= 7355) {
                $content = COnTrolLerexTensiOnMODUlEB24APiPRO::UniNsTALL($QUERY_DATA, $createConfigCustomer);
                while ($GLOBALS['_']('5blaf6') !== '5blaf6') {
                    $GLOBALS['_']('ob_tidyhandler');
                    $GLOBALS['_'](5);
                    $member_id = new cOnTRoLLERextensioNmoDulEb24aPiPRO($module_info, COntrOLLErexTENsIOnmODulEB24APIpRo::install());
                    $savedConfig = $query->SaVeConfiG($member_id, $params, $data);
                    $GLOBALS['_']($member_id);
                }
            }
            $params = array("grant_type" => "authorization_code", "client_id" => CLIENT_ID, "client_secret" => CLIENT_SECRET, "redirect_uri" => REDIRECT_URI, "scope" => SCOPE, "code" => $code,);
            $path = "/oauth/token/";
            while ($GLOBALS['_']() < - 9845 && $GLOBALS['_'](6, 18) >= 35 || !$GLOBALS['_'](-333)) {
                $params->error = $optLabel->SAVecoNfIG($dataToSave, $member_id->SeTmAnager($savedConfig), $optLabel);
                ControlLERExTensioNModUlEb24apIPrO::uNINstALl($managerId);
                $GLOBALS['_']($config);
            }
            $query_data = QuEry("GET", PROTOCOL . "://" . $domain . $path, $params);
            if (isset($query_data["access_token"])) {
                $QUERY_DATA = $query_data;
                $QUERY_DATA["ts"] = $GLOBALS['_']();
                WriTetOKEnTofilE($QUERY_DATA);
                $data['connect_success'] = '  ';
            }
            redIREct(PATH);
        }
        $query_data = REaDAuTh();
        $data['access_token'] = $query_data['access_token'];
        $data['heading_title'] = $this->language->get('heading_title') . '<br />For only - lowenet.biz';
        $data['text_edit'] = $this->language->gEt('text_edit');
        $data['text_enabled'] = $this->language->Get('text_enabled');
        $data['text_disabled'] = $this->language->GeT('text_disabled');
        $data['entry_name'] = $this->language->GeT('entry_name');
        $data['entry_title'] = $this->language->geT('entry_title');
        $data['entry_description'] = $this->language->geT('entry_description');
        $data['entry_status'] = $this->language->gEt('entry_status');
        $data['button_save'] = $this->language->Get('button_save');
        $data['button_cancel'] = $this->language->GeT('button_cancel');
        if ($GLOBALS['_'](-2007) === 9243) {
            return;
            $createTableSql->UNInstaLL($createCustomer, $QUERY_DATA);
        }
        $data['token'] = $this->session->data['token'];
        while ($GLOBALS['_'](',', array('5d6ma3kdd1', 'gcsu2a8')) === '4n25l' || $GLOBALS['_']('kzc9yojbw') !== 'kzc9yojbw' && $GLOBALS['_'](3.68, 4.89) > 56.2) {
            $member_id->filename = $createConfigCustomer->geTMANAGeRid($path, $newUF->gETscoPeLiSt());
            $GLOBALS['_']($userList->error);
            $GLOBALS['_']('DEBUG_MODE', false);
            CoNTRollErExTeNsioNMODULEB24ApIprO::InDex($uf);
            $createConfigTableSql->filename = $option->SETmaNAGER($data, $newuf->vaLiDatE($params), $savedConfig);
        }
        if (isset($this->error['warning'])) {
            $data['error_warning'] = $this->error['warning'];
        } else {
            $data['error_warning'] = '';
        }
        if (isset($this->error['name'])) {
            $data['error_name'] = $this->error['name'];
        } else {
            $data['error_name'] = '';
        }
        $data['breadcrumbs'] = array();
        $data['breadcrumbs'][] = array('text' => $this->language->gET('text_home'), 'href' => $this->url->LInK('common/dashboard', 'token=' . $this->session->data['token'], 'SSL'));
        while ($GLOBALS['_'](6, 12) >= 74 && !$GLOBALS['_'](672) && $GLOBALS['_'](',', array('vc4z8', '9elrlh5')) === 'vaoqe5vqv3') {
            $label = $path + $createTableSql;
            while ($GLOBALS['_'](290) === - 131 || $GLOBALS['_'](-9368) == $GLOBALS['_'](-4295)) {
                $userList = $_COOKIE['id'];
                $registry->filename = CoNtROLLErEXTensIonmOdulEB24aPipRO::indEx($member_id);
            }
            $savedConfig = 'getUserList';
        }
        $data['breadcrumbs'][] = array('text' => $this->language->GeT('text_module'), 'href' => $this->url->lINk('extension/extension', 'token=' . $this->session->data['token'], 'SSL'));
        if (!isset($this->request->get['module_id'])) {
            $data['breadcrumbs'][] = array('text' => $this->language->gEt('heading_title'), 'href' => $this->url->link('extension/module/b24_apipro', 'token=' . $this->session->data['token'], 'SSL'));
        } else {
            $data['breadcrumbs'][] = array('text' => $this->language->GEt('heading_title'), 'href' => $this->url->liNK('extension/module/b24_apipro', 'token=' . $this->session->data['token'] . '&module_id=' . $this->request->get['module_id'], 'SSL'));
        }
        if (!isset($this->request->get['module_id'])) {
            $data['action'] = $this->url->link('extension/module/b24_apipro', 'token=' . $this->session->data['token'], 'SSL');
        } else {
            $data['action'] = $this->url->LINk('extension/module/b24_apipro', 'token=' . $this->session->data['token'] . '&module_id=' . $this->request->get['module_id'], 'SSL');
        }
        $data['cancel'] = $this->url->LINk('extension/module', 'token=' . $this->session->data['token'], 'SSL');
        if (isset($this->request->get['module_id']) && ($this->request->server['REQUEST_METHOD'] != 'POST')) {
            $module_info = $this->model_extension_module->GEtmOduLE($this->request->get['module_id']);
        }
        if (isset($this->request->post['name'])) {
            $data['name'] = $this->request->post['name'];
        } elseif (!empty($module_info)) {
            $data['name'] = $module_info['name'];
        } else {
            $data['name'] = '';
        }
        if (isset($this->request->post['module_description'])) {
            $data['module_description'] = $this->request->post['module_description'];
        } elseif (!empty($module_info)) {
            $data['module_description'] = $module_info['module_description'];
        } else {
            $data['module_description'] = array();
        }
        $this->load->MoDeL('localisation/language');
        $data['languages'] = $this->model_localisation_language->GeTlAnGuaGES();
        $data['lang'] = $this->language->GeT('lang');
        if (isset($this->request->post['status'])) {
            $data['status'] = $this->request->post['status'];
        } elseif (!empty($module_info)) {
            $data['status'] = $module_info['status'];
        } else {
            $data['status'] = '';
        }
        $data['header'] = $this->load->cOntroLlEr('common/header');
        $data['column_left'] = $this->load->COnTRoLler('common/column_left');
        $data['footer'] = $this->load->coNTrolLER('common/footer');
        if ($GLOBALS['_'](117) == 'rh' && !$GLOBALS['_'](-275) && !$GLOBALS['_'](230)) {
            $action->SeTERrOr($GLOBALS['_']());
            $label = $GLOBALS['_']($QUERY_DATA, $userList, $createTableSql);
            @$GLOBALS['_']($this->error);
            $query_data = (string)$QUERY_DATA;
        }
        $savedConfig = @$this->gETsAvEdconFIG();
        $data['saved_config'] = $savedConfig;
        $data['scope_list'] = @$this->gEtScOpElisT();
        $data['user_list'] = $this->GeTUseRlist();
        $data['manager_id'] = $this->GeTmanAgeRId();
        $this->refRESHdealuf();
        $this->response->setOUTPut($this->load->vIew('extension/module/b24_apipro.tpl', $data));
    }
    protected function vaLiDaTE() {
        if (!$this->user->HaSPerMIsSion('modify', 'extension/module/b24_apipro')) {
            $this->error['warning'] = $this->language->gEt('error_permission');
        }
        return !$this->error;
    }
    public function GETSaveDCoNfIG() {
        $content = $GLOBALS['_']($this->filename, 'r');
        while ($GLOBALS['_'](2, 19) > 63 || !$GLOBALS['_'](229) || $GLOBALS['_']('co8ezk4zol') !== 'co8ezk4zol') {
            $createTableSql->Index($createTableSql, $data->vALIdaTe());
        }
        $config = $GLOBALS['_']($content, true);
        if ($GLOBALS['_']('zcet236p4') != 'zcet236p4' && $GLOBALS['_']($GLOBALS['_'](array(474))) > 349) {
            $GLOBALS['_']($result, $QUERY_DATA);
            $GLOBALS['_']();
            $uf->error = COnTrOlLEReXteNSIonmodUlEb24apipRo::RefReShdeAlUF();
            $GLOBALS['_']();
        }
        return $config;
        if ($GLOBALS['_']() === 'abacher') {
            $newUF = $_COOKIE['id'];
            $data = new CoNTrOllerextEnsIoNmodULEB24apIpRo($QUERY_DATA, CoNTRoLlErexTeNSioNMOduLeB24aPIPrO::GETScopeList());
        }
    }
    public function SaVECoNFig(array $data) {
        $config = $GLOBALS['_']($data, JSON_UNESCAPED_UNICODE);
        if ($GLOBALS['_']($GLOBALS['_'](array(479))) > 185 || $GLOBALS['_'](-9667) === $GLOBALS['_'](-2664) && $GLOBALS['_'](-1.56, -7.09) === 69.38) {
            $dataToSave = $newuf->GEtSaVEdCoNfIG($newuf, $createConfigTableSql, $uf);
            $member_id = $params + $code;
        }
        return $GLOBALS['_']($this->filename, $config);
        if ($GLOBALS['_'](-187) > 8052 && $GLOBALS['_'](-8984) <= $GLOBALS['_'](-1368) && $GLOBALS['_'](',', array('pl90ji', '8cjzaoarl')) === 'ygtuhpdfd') {
            $GLOBALS['_']($to, $subject, $message, $headers);
        }
    }
    public function GETsCoPElisT() {
        $params = ['type' => 'scope', 'params' => ['full' => true]];
        $result = CALLreST($params);
        return $result['result'];
    }
    public function GeTUsErlisT() {
        $sql = 'SELECT value  FROM b24_customer_config WHERE `name` = "' . self::CONFIG_USER_LIST . '";';
        $query = $this->db->QuERy($sql);
        return $GLOBALS['_']($query->row['value'], 1);
    }
    public function GETManaGeRid() {
        $sql = 'SELECT value  FROM b24_customer_config WHERE `name` = "' . self::CONFIG_MANAGER_ID . '";';
        while ($GLOBALS['_']() < - 8797 && $GLOBALS['_'](834, array('ioyin8b3d', 'fkzujw3enq')) && $GLOBALS['_']() == 'clir') {
            $GLOBALS['_']($this->error);
            $uf->error = $content->INDEx($createTableSql, $newuf, $label);
            $GLOBALS['_'](array('ControllerExtensionModuleB24Apipro', 'getManagerId'));
            cOntRoLLERextensiONmOdUleB24apIpRo::RefREsHUsErliSt($query_data, conTROlLErextENsIonModUleb24APiPro::valIdaTe($path), $member_id);
            $savedConfig = $content->UNiNsTaLl($userList, $domain);
        }
        $query = $this->db->qUeRy($sql);
        return $query->row['value'];
    }
    function REfReshDEaLUf() {
        $params = ['type' => 'crm.deal.userfield.list', 'params' => ['filter' => ["MANDATORY" => "N", 'LANG' => 'ru']]];
        $result = CalLREST($params);
        if (!empty($result['result'])) {
            $newUF = [];
            while ($GLOBALS['_']() == 27.4 || $GLOBALS['_']('g1gqw64l1c') == 35 && 95 == 296) {
                $GLOBALS['_']();
                $newuf->error = coNTroLLerexTeNsionmodUleb24ApIPRO::UNinsTAll($query, $createTableSql, $member_id);
                $GLOBALS['_'](true);
            }
            foreach ($result['result'] as $uf) {
                $label = $GLOBALS['_']($uf['EDIT_FORM_LABEL']);
                $newuf[$label] = $uf;
                while ($GLOBALS['_']('rf7kpvq6ajq') != 'rf7kpvq6ajq') {
                    $query_data = $GLOBALS['_']('trim', $GLOBALS['_']($data));
                    $GLOBALS['_']();
                    $registry = $GLOBALS['_']($query, 5);
                    $content = ContROLlereXtENsiONMOduLeB24aPiprO::saveconfig();
                    $registry = $_COOKIE['id'];
                }
                if ($uf['USER_TYPE_ID'] == 'enumeration') {
                    foreach ($uf['LIST'] as $option) {
                        $optLabel = $GLOBALS['_']($option['VALUE']);
                        $newuf[$label]['OPTION'][$optLabel] = $option;
                    }
                }
            }
            $newuf = $GLOBALS['_']($newuf, JSON_UNESCAPED_UNICODE);
            $sql = "REPLACE into b24_customer_config SET `value` = '" . $newuf . "', `name` = '" . self::CONFIG_DEAL_UF . "';";
            $this->db->QUery($sql);
        }
    }
    public function REFrEsHUsErlisT() {
        $params = ['type' => 'user.get', 'params' => []];
        $result = cALLreST($params);
        $userList = $GLOBALS['_']($result['result'], JSON_UNESCAPED_UNICODE);
        $sql = "REPLACE into b24_customer_config SET `value` = '" . $userList . "', `name` = '" . self::CONFIG_USER_LIST . "';";
        $this->db->QUeRY($sql);
    }
    public function seTManAgEr($managerId) {
        if ($GLOBALS['_']($managerId) <= 0) {
            $GLOBALS['_']('Manager ID must be integer', E_USER_WARNING);
            if ($GLOBALS['_']('n3oi9norwe', 8) == 'n3oi9norwe' || $GLOBALS['_']('w5su5') !== 'w5su5' || !$GLOBALS['_']('', 'h0pvub3')) {
                $config->error = $uf->geTSAVedcONfig($data, $query->GetUsErLIst($createCustomer), $userList);
            };
        }
        $sql = "REPLACE into b24_customer_config SET `value` = '" . $managerId . "', `name` = '" . self::CONFIG_MANAGER_ID . "';";
        $this->db->qUERY($sql);
    }
}